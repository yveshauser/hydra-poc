<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hydra.Contract.Head</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">hydra-plutus-0.7.0: Hydra Plutus Contracts</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Hydra.Contract.Head</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:DatumType">DatumType</a> = <a href="Hydra-Contract-HeadState.html#t:State" title="Hydra.Contract.HeadState">State</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:RedeemerType">RedeemerType</a> = <a href="Hydra-Contract-HeadState.html#t:Input" title="Hydra.Contract.HeadState">Input</a></li><li class="src short"><a href="#v:hydraHeadV1">hydraHeadV1</a> :: BuiltinByteString</li><li class="src short"><a href="#v:headValidator">headValidator</a> :: <a href="Hydra-Contract-HeadState.html#t:State" title="Hydra.Contract.HeadState">State</a> -&gt; <a href="Hydra-Contract-HeadState.html#t:Input" title="Hydra.Contract.HeadState">Input</a> -&gt; ScriptContext -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:CheckCollectComError">CheckCollectComError</a><ul class="subs"><li>= <a href="#v:NoContinuingOutput">NoContinuingOutput</a></li><li>| <a href="#v:MoreThanOneContinuingOutput">MoreThanOneContinuingOutput</a></li><li>| <a href="#v:OutputValueNotPreserved">OutputValueNotPreserved</a></li><li>| <a href="#v:OutputHashNotMatching">OutputHashNotMatching</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:HeadContext">HeadContext</a> = <a href="#v:HeadContext">HeadContext</a> {<ul class="subs"><li><a href="#v:headAddress">headAddress</a> :: Address</li><li><a href="#v:headInputValue">headInputValue</a> :: Value</li><li><a href="#v:headCurrencySymbol">headCurrencySymbol</a> :: CurrencySymbol</li></ul>}</li><li class="src short"><a href="#v:mkHeadContext">mkHeadContext</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a></li><li class="src short"><a href="#v:checkAbort">checkAbort</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a> -&gt; [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>] -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:checkCollectCom">checkCollectCom</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a> -&gt; (<a href="Hydra-Data-ContestationPeriod.html#t:ContestationPeriod" title="Hydra.Data.ContestationPeriod">ContestationPeriod</a>, [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>]) -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:checkClose">checkClose</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a> -&gt; [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>] -&gt; BuiltinByteString -&gt; <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a> -&gt; BuiltinByteString -&gt; [<a href="Hydra-Contract-HeadState.html#t:Signature" title="Hydra.Contract.HeadState">Signature</a>] -&gt; <a href="Hydra-Data-ContestationPeriod.html#t:ContestationPeriod" title="Hydra.Data.ContestationPeriod">ContestationPeriod</a> -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:makeContestationDeadline">makeContestationDeadline</a> :: <a href="Hydra-Data-ContestationPeriod.html#t:ContestationPeriod" title="Hydra.Data.ContestationPeriod">ContestationPeriod</a> -&gt; ScriptContext -&gt; POSIXTime</li><li class="src short"><a href="#v:checkContest">checkContest</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a> -&gt; POSIXTime -&gt; [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>] -&gt; <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a> -&gt; <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a> -&gt; BuiltinByteString -&gt; [<a href="Hydra-Contract-HeadState.html#t:Signature" title="Hydra.Contract.HeadState">Signature</a>] -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:checkHeadOutputDatum">checkHeadOutputDatum</a> :: ToData a =&gt; ScriptContext -&gt; a -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:txOutAdaValue">txOutAdaValue</a> :: TxOut -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a></li><li class="src short"><a href="#v:txInfoAdaFee">txInfoAdaFee</a> :: TxInfo -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a></li><li class="src short"><a href="#v:checkFanout">checkFanout</a> :: BuiltinByteString -&gt; POSIXTime -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; ScriptContext -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:-38-">(&amp;)</a> :: a -&gt; (a -&gt; b) -&gt; b</li><li class="src short"><a href="#v:mustBeSignedByParticipant">mustBeSignedByParticipant</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a> -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:findParticipationTokens">findParticipationTokens</a> :: CurrencySymbol -&gt; Value -&gt; [TokenName]</li><li class="src short"><a href="#v:mustContinueHeadWith">mustContinueHeadWith</a> :: ScriptContext -&gt; Address -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; Datum -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:findTxOutDatum">findTxOutDatum</a> :: TxInfo -&gt; TxOut -&gt; Datum</li><li class="src short"><a href="#v:hashPreSerializedCommits">hashPreSerializedCommits</a> :: [<a href="Hydra-Contract-Commit.html#t:Commit" title="Hydra.Contract.Commit">Commit</a>] -&gt; BuiltinByteString</li><li class="src short"><a href="#v:hashTxOuts">hashTxOuts</a> :: [TxOut] -&gt; BuiltinByteString</li><li class="src short"><a href="#v:verifySnapshotSignature">verifySnapshotSignature</a> :: [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>] -&gt; <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a> -&gt; BuiltinByteString -&gt; [<a href="Hydra-Contract-HeadState.html#t:Signature" title="Hydra.Contract.HeadState">Signature</a>] -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:verifyPartySignature">verifyPartySignature</a> :: <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a> -&gt; BuiltinByteString -&gt; <a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a> -&gt; <a href="Hydra-Contract-HeadState.html#t:Signature" title="Hydra.Contract.HeadState">Signature</a> -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:compareRef">compareRef</a> :: TxOutRef -&gt; TxOutRef -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Ordering" title="Distribution.Compat.Prelude.Internal">Ordering</a></li><li class="src short"><a href="#v:compiledValidator">compiledValidator</a> :: CompiledCode <a href="Plutus-Extras.html#t:ValidatorType" title="Plutus.Extras">ValidatorType</a></li><li class="src short"><a href="#v:validatorScript">validatorScript</a> :: Script</li><li class="src short"><a href="#v:validatorHash">validatorHash</a> :: ValidatorHash</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DatumType" class="def">DatumType</a> = <a href="Hydra-Contract-HeadState.html#t:State" title="Hydra.Contract.HeadState">State</a> <a href="#t:DatumType" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:RedeemerType" class="def">RedeemerType</a> = <a href="Hydra-Contract-HeadState.html#t:Input" title="Hydra.Contract.HeadState">Input</a> <a href="#t:RedeemerType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hydraHeadV1" class="def">hydraHeadV1</a> :: BuiltinByteString <a href="#v:hydraHeadV1" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:headValidator" class="def">headValidator</a> :: <a href="Hydra-Contract-HeadState.html#t:State" title="Hydra.Contract.HeadState">State</a> -&gt; <a href="Hydra-Contract-HeadState.html#t:Input" title="Hydra.Contract.HeadState">Input</a> -&gt; ScriptContext -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:headValidator" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CheckCollectComError" class="def">CheckCollectComError</a> <a href="#t:CheckCollectComError" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NoContinuingOutput" class="def">NoContinuingOutput</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:MoreThanOneContinuingOutput" class="def">MoreThanOneContinuingOutput</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:OutputValueNotPreserved" class="def">OutputValueNotPreserved</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:OutputHashNotMatching" class="def">OutputHashNotMatching</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HeadContext" class="def">HeadContext</a> <a href="#t:HeadContext" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HeadContext" class="def">HeadContext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:headAddress" class="def">headAddress</a> :: Address</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:headInputValue" class="def">headInputValue</a> :: Value</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:headCurrencySymbol" class="def">headCurrencySymbol</a> :: CurrencySymbol</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:mkHeadContext" class="def">mkHeadContext</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a> <a href="#v:mkHeadContext" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:checkAbort" class="def">checkAbort</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a> -&gt; [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>] -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:checkAbort" class="selflink">#</a></p><div class="doc"><p>On-Chain verification for <code><a href="Hydra-Contract-HeadState.html#v:Abort" title="Hydra.Contract.HeadState">Abort</a></code> transition. It verifies that:</p><ul><li>All PTs have been burnt: The right number of Head tokens, both PT for
     parties and thread token, with the correct head id, are burnt,</li><li>All committed funds have been redistributed. This is done via v_commit
     and it only needs to ensure that we have spent all comitted outputs,
     which follows from burning all the PTs.</li></ul></div></div><div class="top"><p class="src"><a id="v:checkCollectCom" class="def">checkCollectCom</a> <a href="#v:checkCollectCom" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ScriptContext</td><td class="doc"><p>Script execution context</p></td></tr><tr><td class="src">-&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a></td><td class="doc"><p>Static information about the head (i.e. address, value, currency...)</p></td></tr><tr><td class="src">-&gt; (<a href="Hydra-Data-ContestationPeriod.html#t:ContestationPeriod" title="Hydra.Data.ContestationPeriod">ContestationPeriod</a>, [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>])</td><td class="doc"><p>Initial state</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>On-Chain verification for <code><a href="Hydra-Contract-HeadState.html#v:CollectCom" title="Hydra.Contract.HeadState">CollectCom</a></code> transition. It verifies that:</p><ul><li>All participants have committed (even empty commits)</li><li>All commits are properly collected and locked into the contract as a hash
     of serialized tx outputs in the same sequence as commit inputs!</li><li>The transaction is performed (i.e. signed) by one of the head participants</li></ul><p>It must also initialize the on-chain state &#951;* with a snapshot number and a
 hash of committed outputs.</p><p>(*) In principle, &#951; contains not a hash but a full UTXO set as well as a set
 of dangling transactions. However, in the coordinated version of the
 protocol, there can't be any dangling transactions and thus, it is no longer
 required to check applicability of those transactions to the UTXO set. It
 suffices to store a hash of the resulting outputs of that UTXO instead.</p></div></div><div class="top"><p class="src"><a id="v:checkClose" class="def">checkClose</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a> -&gt; [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>] -&gt; BuiltinByteString -&gt; <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a> -&gt; BuiltinByteString -&gt; [<a href="Hydra-Contract-HeadState.html#t:Signature" title="Hydra.Contract.HeadState">Signature</a>] -&gt; <a href="Hydra-Data-ContestationPeriod.html#t:ContestationPeriod" title="Hydra.Data.ContestationPeriod">ContestationPeriod</a> -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:checkClose" class="selflink">#</a></p><div class="doc"><p>The close validator must verify that:</p><ul><li>The closing snapshot number and signature is correctly signed</li><li>The resulting closed state is consistent with the open state or the
     closing snapshot, depending on snapshot number</li><li>The transaction is performed (i.e. signed) by one of the head participants</li></ul></div></div><div class="top"><p class="src"><a id="v:makeContestationDeadline" class="def">makeContestationDeadline</a> :: <a href="Hydra-Data-ContestationPeriod.html#t:ContestationPeriod" title="Hydra.Data.ContestationPeriod">ContestationPeriod</a> -&gt; ScriptContext -&gt; POSIXTime <a href="#v:makeContestationDeadline" class="selflink">#</a></p><div class="doc"><p>Checks that the datum</p></div></div><div class="top"><p class="src"><a id="v:checkContest" class="def">checkContest</a> <a href="#v:checkContest" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ScriptContext</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; POSIXTime</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a></td><td class="doc"><p>Snapshot number of the closed state.
 XXX: Having two snapshot numbers here is FRAGILE</p></td></tr><tr><td class="src">-&gt; <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a></td><td class="doc"><p>Snapshot number of the contestin snapshot.</p></td></tr><tr><td class="src">-&gt; BuiltinByteString</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; [<a href="Hydra-Contract-HeadState.html#t:Signature" title="Hydra.Contract.HeadState">Signature</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The contest validator must verify that:</p><ul><li>The contest snapshot number is strictly greater than the closed snapshot number.</li><li>The contest snapshot is correctly signed.</li><li>The resulting closed state is consistent with the contested snapshot.</li><li>The transaction is performed (i.e. signed) by one of the head participants</li></ul></div></div><div class="top"><p class="src"><a id="v:checkHeadOutputDatum" class="def">checkHeadOutputDatum</a> :: ToData a =&gt; ScriptContext -&gt; a -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:checkHeadOutputDatum" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:txOutAdaValue" class="def">txOutAdaValue</a> :: TxOut -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> <a href="#v:txOutAdaValue" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:txInfoAdaFee" class="def">txInfoAdaFee</a> :: TxInfo -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> <a href="#v:txInfoAdaFee" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:checkFanout" class="def">checkFanout</a> :: BuiltinByteString -&gt; POSIXTime -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; ScriptContext -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:checkFanout" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:-38-" class="def">(&amp;)</a> :: a -&gt; (a -&gt; b) -&gt; b <a href="#v:-38-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mustBeSignedByParticipant" class="def">mustBeSignedByParticipant</a> :: ScriptContext -&gt; <a href="Hydra-Contract-Head.html#t:HeadContext" title="Hydra.Contract.Head">HeadContext</a> -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:mustBeSignedByParticipant" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findParticipationTokens" class="def">findParticipationTokens</a> :: CurrencySymbol -&gt; Value -&gt; [TokenName] <a href="#v:findParticipationTokens" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mustContinueHeadWith" class="def">mustContinueHeadWith</a> :: ScriptContext -&gt; Address -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; Datum -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:mustContinueHeadWith" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findTxOutDatum" class="def">findTxOutDatum</a> :: TxInfo -&gt; TxOut -&gt; Datum <a href="#v:findTxOutDatum" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hashPreSerializedCommits" class="def">hashPreSerializedCommits</a> :: [<a href="Hydra-Contract-Commit.html#t:Commit" title="Hydra.Contract.Commit">Commit</a>] -&gt; BuiltinByteString <a href="#v:hashPreSerializedCommits" class="selflink">#</a></p><div class="doc"><p>Hash a potentially unordered list of commits by sorting them, concatenating
 their <code><a href="Hydra-Contract-Commit.html#v:preSerializedOutput" title="Hydra.Contract.Commit">preSerializedOutput</a></code> bytes and creating a SHA2_256 digest over that.</p></div></div><div class="top"><p class="src"><a id="v:hashTxOuts" class="def">hashTxOuts</a> :: [TxOut] -&gt; BuiltinByteString <a href="#v:hashTxOuts" class="selflink">#</a></p><div class="doc"><p>Hash a pre-ordered list of transaction outputs by serializing each
 individual <code>TxOut</code>, concatenating all bytes together and creating a SHA2_256
 digest over that.</p></div></div><div class="top"><p class="src"><a id="v:verifySnapshotSignature" class="def">verifySnapshotSignature</a> :: [<a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a>] -&gt; <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a> -&gt; BuiltinByteString -&gt; [<a href="Hydra-Contract-HeadState.html#t:Signature" title="Hydra.Contract.HeadState">Signature</a>] -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:verifySnapshotSignature" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:verifyPartySignature" class="def">verifyPartySignature</a> :: <a href="Hydra-Contract-HeadState.html#t:SnapshotNumber" title="Hydra.Contract.HeadState">SnapshotNumber</a> -&gt; BuiltinByteString -&gt; <a href="Hydra-Data-Party.html#t:Party" title="Hydra.Data.Party">Party</a> -&gt; <a href="Hydra-Contract-HeadState.html#t:Signature" title="Hydra.Contract.HeadState">Signature</a> -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:verifyPartySignature" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:compareRef" class="def">compareRef</a> :: TxOutRef -&gt; TxOutRef -&gt; <a href="file:///nix/store/bacifcjs171a4z6qm5h24va3gld04p1j-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Ordering" title="Distribution.Compat.Prelude.Internal">Ordering</a> <a href="#v:compareRef" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:compiledValidator" class="def">compiledValidator</a> :: CompiledCode <a href="Plutus-Extras.html#t:ValidatorType" title="Plutus.Extras">ValidatorType</a> <a href="#v:compiledValidator" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:validatorScript" class="def">validatorScript</a> :: Script <a href="#v:validatorScript" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:validatorHash" class="def">validatorHash</a> :: ValidatorHash <a href="#v:validatorHash" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>