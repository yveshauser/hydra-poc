"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[6217],{9257:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(7294),i=n(1736),r="terminalWindow_wGrl",o="terminalWindowHeader_o9Cs",s="terminalWindowBody_tzdS",d="buttons_IGLB",l="dot_fGZE";function u(e){var t=e.children,n=e.minHeight,u="string"==typeof t?a.createElement(i.Z,null,t):t;return a.createElement("div",{className:r,style:{minHeight:n}},a.createElement("div",{className:o},a.createElement("div",{className:d},a.createElement("span",{className:l,style:{background:"#f25f58"}}),a.createElement("span",{className:l,style:{background:"#fbbe3c"}}),a.createElement("span",{className:l,style:{background:"#58cb42"}}))),a.createElement("div",{className:s},u))}},535:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return v},frontMatter:function(){return d},metadata:function(){return u},toc:function(){return p}});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),o=n(9257),s=["components"],d={sidebar_position:2},l="Via Docker",u={unversionedId:"getting-started/demo/with-docker",id:"getting-started/demo/with-docker",title:"Via Docker",description:"Ce document d\xe9taille les \xe9tapes n\xe9cessaires pour faire tourner une Hydra Head dans un environment de d\xe9mo, avec Docker.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/getting-started/demo/with-docker.md",sourceDirName:"getting-started/demo",slug:"/getting-started/demo/with-docker",permalink:"/head-protocol/fr/docs/getting-started/demo/with-docker",editUrl:"https://github.com/input-output-hk/hydra-poc/tree/master/docs/docs/getting-started/demo/with-docker.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"D\xe9mo",permalink:"/head-protocol/fr/docs/getting-started/demo/"},next:{title:"Sans Docker",permalink:"/head-protocol/fr/docs/getting-started/demo/without-docker"}},c={},p=[{value:"Mise en place du r\xe9seau",id:"mise-en-place-du-r\xe9seau",level:2},{value:"G\xe9n\xe9rer des fonds",id:"g\xe9n\xe9rer-des-fonds",level:2},{value:"Utiliser l&#39;interface client",id:"utiliser-linterface-client",level:2}],m={toc:p};function v(e){var t=e.components,n=(0,i.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"via-docker"},"Via Docker"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Ce document d\xe9taille les \xe9tapes n\xe9cessaires pour faire tourner une Hydra Head dans un environment de d\xe9mo, avec Docker.")),(0,r.kt)("p",null,"La d\xe9mo comprend:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"un cluster de trois noeuds Hydra, connect\xe9s point-\xe0-point, et ayant chacun une identit\xe9 (",(0,r.kt)("inlineCode",{parentName:"li"},"alice"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"bob"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"carol"),") associ\xe9e \xe0 une paire de cl\xe9s publique/priv\xe9e;"),(0,r.kt)("li",{parentName:"ul"},"Un noeud Cardano, en mode BFT, produisant des blocs et formant a lui seul un r\xe9seau Cardano pour le d\xe9veloppement local","\xa0",";"),(0,r.kt)("li",{parentName:"ul"},"un serveur Prometheus pour des m\xe9triques","\xa0",";"),(0,r.kt)("li",{parentName:"ul"},"une interface utilisateur dans le terminal pour se connecter et op\xe9rer chaque noeud Hydra. ")),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Avertissement!")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},'Le noeud Cardano cr\xe9\xe9 un "r\xe9seau" priv\xe9 et local qui d\xe9marre depuis un bloc ',(0,r.kt)("em",{parentName:"p"},"genesis"),". Pour d\xe9marrer, la configuration du noeud doit \xeatre \xe0 jour (comprendre, r\xe9cente). Si au d\xe9marrage, le noeud Cardano retourne ",(0,r.kt)("inlineCode",{parentName:"p"},"LedgerNoView"),", alors c'est que l'heure de d\xe9marrage indiqu\xe9e dans la configuration g\xe9n\xe9sis est trop loin dans le pass\xe9: il faut en ce cas g\xe9n\xe9rer la configuration \xe0 nouveau via ",(0,r.kt)("inlineCode",{parentName:"p"},"prepare-devnet.sh"),"."))),(0,r.kt)("h2",{id:"mise-en-place-du-r\xe9seau"},"Mise en place du r\xe9seau"),(0,r.kt)("p",null,"Nous utiliserons ",(0,r.kt)("a",{parentName:"p",href:"https://www.docker.com/get-started"},"Docker")," et ",(0,r.kt)("a",{parentName:"p",href:"https://www.docker.com/get-started"},"compose")," pour cette d\xe9mo, assurez-vous de les avoir disponibles dans votre terminal de commandes. Si vous ne souhaitez pas utiliser ou installer Docker, vous pouvez directement vous rendre sur ",(0,r.kt)("a",{parentName:"p",href:"/docs/getting-started/demo/without-docker"},"D\xe9mo: Sans Docker")," et mettre les mains dans le cambouis."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Contexte")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Toutes les commandes ci-dessous supposent qu'elles sont \xe9xecut\xe9es depuis le dossier ",(0,r.kt)("inlineCode",{parentName:"p"},"demo/"),", \xe0 la racine du d\xe9p\xf4t. Vous aurez donc besoin de cloner le d\xe9p\xf4t et de ",(0,r.kt)("inlineCode",{parentName:"p"},"cd demo")," avant d'aller plus loin."))),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"(in)compatibilit\xe9 du syst\xe8me d'exploitation")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Les instructions fournies ci-apr\xe8s ont \xe9t\xe9 test\xe9es pour des environnements Linux r\xe9cents (Ubuntu, ArchLinux, NixOS...). Si vous \xeates sur Windows ou MacOS vous aurez sans doute besoin d'ajuster certaines commandes li\xe9es aux ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/storage/volumes/"},"volumes"),"."))),(0,r.kt)("p",null,"Pour commencer, r\xe9cup\xe9rez les images des diff\xe9rents services d\xe9finis dans le fichier compose:"),(0,r.kt)(o.Z,{mdxType:"TerminalWindow"},"docker-compose --profile tui pull"),(0,r.kt)("p",null,"Ensuite, vous pouvez ex\xe9cuter le script ",(0,r.kt)("inlineCode",{parentName:"p"},"./prepare-devnet.sh")," pour cr\xe9er les fichiers n\xe9cessaires \xe0 la configuration du r\xe9seau local (a.k.a devnet). Le script g\xe9n\xe8re une configuration ",(0,r.kt)("em",{parentName:"p"},"genesis")," Cardano (qui fixe les param\xe8tres du protocole). Notez que dans le cadre de cette d\xe9mo, la configuration du r\xe9seau n'utilise pas de ",(0,r.kt)("em",{parentName:"p"},"stake pool")," et ne requiert qu'un unique noeud pour fonctionner."),(0,r.kt)(o.Z,{mdxType:"TerminalWindow"},"./prepare-devnet.sh"),(0,r.kt)("p",null,"C'est tout. Il est maintenant possible de d\xe9marrer le ",(0,r.kt)("em",{parentName:"p"},"cluster")," via:"),(0,r.kt)(o.Z,{mdxType:"TerminalWindow"},"docker-compose up -d"),(0,r.kt)("p",null,"Toutes ces \xe9tapes sont combin\xe9es dans un unique script ",(0,r.kt)("inlineCode",{parentName:"p"},"./run-docker.sh"),". Ce script contient aussi quelques petites v\xe9rifications pour \xe9viter de vous tirer une balle dans le pied avec certaines commandes. "),(0,r.kt)("h2",{id:"g\xe9n\xe9rer-des-fonds"},"G\xe9n\xe9rer des fonds"),(0,r.kt)("p",null,'En l\'\xe9tat actuel, les noeuds Hydra requi\xe8rent des UTxO dans une forme assez sp\xe9cifique afin de pouvoir payer les transactions n\xe9cessaires au protocole (on appelle ces UTxO: "carburant"), ainsi que des fonds \xe0 consigner dans le contrat pour chaque participant. Parmi les fichiers, vous trouverez un script ',(0,r.kt)("inlineCode",{parentName:"p"},"./seed-devnet.sh")," qui s'occupe de g\xe9n\xe9rer ces UTxOs pour chaque participant en utilisant la ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-cli"),". "),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Les transactions g\xe9n\xe9r\xe9es par seed-devnet.sh n'ont rien de particulier, ce sont des transactions Cardano. Toutefois si vous deviez les g\xe9n\xe9rer vous-m\xeame, assurez vous qu'\xe0 chaque addresse g\xe9n\xe9r\xe9e \xe0 partir de la paire publique/priv\xe9e associ\xe9e \xe0 l'option ",(0,r.kt)("inlineCode",{parentName:"p"},"--cardano-signing-key")," de chaque participant soient envoy\xe9s deux UTxOs :"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},"Un UTxO simple, contenant des Ada ou actifs natifs;"),(0,r.kt)("li",{parentName:"ul"},"Un UTxO ne contenant que des Ada et avec le datum hash suivant: ",(0,r.kt)("inlineCode",{parentName:"li"},"a654fb60d21c1fed48db2c320aa6df9737ec0204c0ba53b9b94a09fb40e757f3"),' (ce datum identifie les UTxOs r\xe9serv\xe9s au "carburant").')))),(0,r.kt)("h2",{id:"utiliser-linterface-client"},"Utiliser l'interface client"),(0,r.kt)("p",null,"\xc0 l'aide de compose, vous pouvez d\xe9marrer les interfaces clientes (a.k.a ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui"),") pour interagir avec chaque noeud Hydra. Le fichier compose contient d\xe9j\xe0 trois services pr\xe9-configur\xe9s: ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-1"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-2"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-3"),". Pour d\xe9marrer le premier client, utilisez simplement:"),(0,r.kt)(o.Z,{mdxType:"TerminalWindow"},"docker-compose --profile tui run hydra-tui-1"),(0,r.kt)("p",null,"Cette commande lance une interface utilisateur dans le terminal, configur\xe9e avec les cl\xe9s du premier noeud (i.e. Alice). Dans d'autres terminaux, vous pouvez lancer de la m\xeame fa\xe7on ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-2")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-3"),"."))}v.isMDXComponent=!0}}]);